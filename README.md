# Anonimizator (локальный веб-сервис псевдоанонимизации)

## Цель
Локальный (без серверной части) веб-инструмент для псевдоанонимизации данных из Excel/CSV: замена выбранных значений на случайные токены с сохранением словаря соответствий для последующей деанонимизации ответов ИИ.

## Ключевые требования
- Работает полностью в браузере, без сервера и без внешних API.
- Стек: чистый HTML + CSS + JS.
- Единственная подключаемая библиотека: `xlsx.full.min.js` (импорт Excel, экспорт Excel/CSV).
- Псевдоанонимизация = токенизация:
  - токены должны быть криптографически случайными;
  - по токену нельзя восстановить исходное значение без словаря;
  - никаких “паттернов” (префиксов типа `PHONE_` / `FIO_`) не добавлять.
- Словарь хранится отдельно в JSON (экспорт/импорт) и является единственным способом обратного восстановления.
- Не тронутые столбцы в экспортируемой таблице остаются как в исходнике.

## Функциональность (MVP)
1. Загрузка Excel.
2. Выбор листа (если листов несколько).
3. Отображение таблицы в фиксированном окне со скроллом (без ограничения “первые N строк”).
4. Выбор столбцов для токенизации (несколько столбцов одновременно).
5. Токенизация выбранных столбцов.
6. Экспорт:
   - обезличенная таблица (CSV/Excel);
   - словарь токенов (JSON).
7. Блок работы с ответом ИИ:
   - импорт словаря JSON;
   - поле для “ответа ИИ”;
   - распознавание токенов в ответе;
   - деанонимизация ответа строго по словарю;
   - вывод восстановленного текста.
8. Свернутое поле “подсказка/промпт” для ИИ: инструкция не менять токены и воспринимать их как атомарные значения.

## Токены и безопасность
- Токен генерируется криптографически случайно через Web Crypto API (`crypto.getRandomValues`).
- Формат токена: непривязанный к типу данных случайный идентификатор достаточной длины (например, 128 бит в base32/base64url/hex).
- Единственный источник восстановления — словарь JSON.

## Запуск
Открыть `index.html` в браузере (локально). Сервер не требуется.

## Структура проекта (план)
- `index.html` — интерфейс.
- `styles.css` — стили.
- `app.js` — логика.
- `xlsx.full.min.js` — библиотека для Excel.
- `tools/` — bat-скрипты для git (pull/push).
- `docs/` — документация проекта (если потребуется).

## Правила работы через Cursor + GitHub
- Все изменения фиксируются через git, чтобы сохранялась история и был откат.
- Предпочтительный workflow: отдельная ветка `feature/<short>` → commit → push → PR → merge в `main` → `git pull` на локальном `main`.
- Если PR создать нельзя, минимум: ветка → commit → push (PR делается вручную в GitHub).
